# Changelog

- **2026-02-23** > apps/gateway-orchestrator/src/builtins/conversation_store.ts > ConversationStore > Added file-backed conversation event store scaffold for per-session chat history persistence groundwork (refresh-safe transcript replay).
- **2026-02-23** > apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts, apps/worker/src/server.ts, .env.example, scripts/test-manual-checklist > loadDotEnvFile and runtime startup env bootstrap > Added `.env` file loading for gateway/worker startup, introduced committed `.env.example` template, and documented `.env`-first manual test startup.
- **2026-02-23** > apps/gateway-orchestrator/src/auth/oauth_codec.ts, apps/gateway-orchestrator/src/auth/oauth_store.ts, apps/gateway-orchestrator/src/auth/oauth_service.ts > OAuthSecretCodec/OAuthStore/OAuthService > Added OAuth state+token persistence with optional encryption, mock/live modes, callback completion, status, and disconnect flows.
- **2026-02-23** > apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts > loadConfig and runtime wiring > Added OAuth/public URL configuration and gateway startup wiring for OAuth service initialization.
- **2026-02-23** > apps/gateway-orchestrator/src/builtins/command_parser.ts, apps/gateway-orchestrator/src/gateway_service.ts > auth commands and execution paths > Added `/auth connect`, `/auth status`, `/auth disconnect` command support for WhatsApp/chat ingress.
- **2026-02-23** > apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts > OAuth API and UI controls > Added OAuth endpoints (`start/status/disconnect/callback/mock authorize`) and web console controls for local OAuth testing.
- **2026-02-23** > tests/unit/oauth_service.test.ts, tests/integration/oauth_commands.test.ts, tests/unit/command_parser.test.ts, tests/unit/config.test.ts, tests/unit/gateway_app_ui_route.test.ts, tests/unit/web_console_ui.test.ts > OAuth test coverage > Added unit/integration coverage for OAuth service behavior, command flow, route registration, config parsing, and UI endpoint wiring.
- **2026-02-23** > docs/detailed_project_plan.md, docs/features.md, docs/progress.md, scripts/test-manual-checklist > Phase 6.1 OAuth planning/progress/manual checks > Documented OAuth scope and acceptance criteria, moved Phase 6 to in-progress, and added manual OAuth verification steps.
- **2026-02-23** > apps/gateway-orchestrator/src/ui/render_web_console.ts > renderWebConsoleHtml > Added browser-based test console UI for chat, async jobs, Baileys simulation, and memory operations.
- **2026-02-23** > apps/gateway-orchestrator/src/app.ts, tests/unit/gateway_app_ui_route.test.ts, tests/unit/web_console_ui.test.ts > createGatewayApp and UI route tests > Added `/ui` HTML route, root redirect to `/ui`, and route/render tests for the new interface.
- **2026-02-23** > scripts/test-manual-checklist > web console checklist section > Added manual browser-driven validation steps for the new test interface.
- **2026-02-23** > docs/detailed_project_plan.md, docs/features.md > test surfaces and feature definition > Documented dual testing surfaces (web console now, WhatsApp path next) and acceptance criteria.
- **2026-02-22** > scripts/committer > first-commit index reset path > Added unborn-HEAD-safe staged index clearing so initial commits can run via `scripts/committer`.
- **2026-02-22** > docs/git_workflow.md > workflow sections > Added repository branching, commit, push, and validation workflow documentation.
- **2026-02-22** > docs/changelog.md > changelog format > Created changelog file with required per-change entry format.
- **2026-02-22** > AGENTS.md > Testing Workflow section > Added phase-based automated/manual testing rules and commit-time validation expectations.
- **2026-02-22** > Gemini.md > Testing Workflow section > Added phase-based automated/manual testing rules and commit-time validation expectations.
- **2026-02-22** > docs/detailed_project_plan.md > phase plan and test roadmap > Added phased implementation plan, proposed repo structure, and automated/manual test strategy.
- **2026-02-22** > docs/features.md > MVP and post-MVP features > Added key feature set with acceptance criteria and test approach per feature.
- **2026-02-22** > docs/changelog.md > changelog entries > Corrected legacy entry format and logged new planning/documentation updates.
- **2026-02-22** > AGENTS.md, Gemini.md > Repo Guidelines updates > Reloaded and committed updated agent instruction files with clarified architect/clarification-first guidance.
- **2026-02-22** > docs/detailed_project_plan.md > architecture and phase definitions > Replaced draft plan with locked decisions, phase exit criteria, and completion rule for progress/changelog updates.
- **2026-02-22** > docs/features.md > MVP and deferred scope > Aligned features to locked runtime, memory, external skill integration, and security model.
- **2026-02-22** > docs/progress.md > phase tracker > Added canonical progress tracking file with current phase and completion checklist template.
- **2026-02-22** > AGENTS.md > Progress and Changelog Discipline section > Added rule to require progress + changelog updates when tasks/phases complete.
- **2026-02-22** > Gemini.md > Progress and Changelog Discipline section > Added rule to require progress + changelog updates when tasks/phases complete.
- **2026-02-22** > package.json, tsconfig.json, vitest.config.ts, .gitignore > project bootstrap scripts/config > Added TypeScript runtime/test tooling with build and phase test commands.
- **2026-02-22** > apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/local_queue_store.ts, apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts > core runtime skeleton > Added config loader, file-backed queue store, gateway service, API app, and gateway startup entrypoint.
- **2026-02-22** > apps/worker/src/worker.ts, apps/worker/src/server.ts > worker loop > Added polling worker with deterministic stub processor, cancellation handling, and process bootstrap.
- **2026-02-22** > packages/contracts/src/job.ts, packages/contracts/src/receipt.ts, packages/contracts/src/index.ts > contracts schemas > Added initial job/message/receipt schemas and exported contract types.
- **2026-02-22** > tests/unit/config.test.ts, tests/unit/schemas.test.ts, tests/integration/job_handoff.test.ts, tests/smoke/phase1_smoke.test.ts, tests/helpers/wait_for.ts > Phase 1 tests > Added unit/integration/smoke tests covering config, contracts, and queue handoff flow.
- **2026-02-22** > scripts/test-unit, scripts/test-integration, scripts/test-smoke, scripts/test-security, scripts/test-manual-checklist > test runners > Added executable scripts for automated and manual phase validation.
- **2026-02-22** > docs/progress.md > Phase 1 status > Marked Phase 1 complete and advanced current phase marker to Phase 2.
- **2026-02-22** > packages/contracts/src/whatsapp.ts, packages/contracts/src/index.ts > WhatsApp contract schema > Added Baileys inbound payload schema export for provider normalization and validation.
- **2026-02-22** > packages/provider-adapters/src/whatsapp_adapter.ts, packages/provider-adapters/src/baileys_adapter.ts, packages/provider-adapters/src/index.ts > provider adapters > Added outbound adapter interface, stdout/in-memory adapters, and Baileys transport adapter wrapper.
- **2026-02-22** > apps/gateway-orchestrator/src/whatsapp/normalize_baileys.ts, apps/gateway-orchestrator/src/whatsapp/dedupe_store.ts > ingress normalization and dedupe > Added Baileys message normalization and file-backed dedupe TTL store.
- **2026-02-22** > apps/gateway-orchestrator/src/notification_store.ts, apps/gateway-orchestrator/src/notification_dispatcher.ts > async status outbox > Added file-backed outbound notification queue and dispatcher loop for WhatsApp status updates.
- **2026-02-22** > apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts > Phase 2 gateway updates > Added Baileys inbound route handling, dedupe integration, queued notifications, and dispatcher startup wiring.
- **2026-02-22** > apps/worker/src/worker.ts, apps/worker/src/server.ts > worker status events > Added lifecycle status callbacks and notification enqueue integration for running/succeeded/failed/cancelled updates.
- **2026-02-22** > tests/unit/baileys_normalizer.test.ts, tests/unit/dedupe_store.test.ts, tests/integration/baileys_async_updates.test.ts, tests/smoke/phase2_smoke.test.ts > Phase 2 tests > Added unit/integration/smoke coverage for Baileys normalization, dedupe, async updates, and chat responsiveness during long jobs.
- **2026-02-22** > docs/progress.md > Phase 2 status > Marked Phase 2 complete and advanced current phase marker to Phase 3 in progress.
- **2026-02-22** > packages/memory/src/types.ts, packages/memory/src/redact.ts, packages/memory/src/chunker.ts, packages/memory/src/embeddings.ts, packages/memory/src/sqlite_memory_index.ts, packages/memory/src/memory_service.ts, packages/memory/src/index.ts > memory subsystem > Added markdown-canonical memory service with SQLite FTS index, embedding cache, hybrid search, snippet retrieval, note append, sync triggers, and status reporting APIs.
- **2026-02-22** > apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts > memory API wiring > Added memory endpoints (`status`, `sync`, `search`, `snippet`, `notes`) and runtime memory service startup/shutdown wiring in gateway process.
- **2026-02-22** > tests/unit/memory_chunker.test.ts, tests/unit/memory_redact.test.ts, tests/integration/memory_service.test.ts, tests/smoke/phase3_smoke.test.ts > Phase 3 tests > Added unit/integration/smoke coverage for chunking, redaction, cited retrieval, append flow, and recall quality baseline.
- **2026-02-22** > scripts/test-manual-checklist > manual validation guide > Expanded manual checklist with Phase 2 and Phase 3 verification steps and commands.
- **2026-02-22** > docs/progress.md > Phase 3 status > Marked Phase 3 complete and advanced current phase marker to Phase 4 not started.
- **2026-02-22** > packages/contracts/src/skill.ts, packages/contracts/src/index.ts > skill contract schema > Added skill manifest and structured error schemas for external skill packaging and invocation validation.
- **2026-02-22** > packages/skill-runner/src/types.ts, packages/skill-runner/src/security.ts, packages/skill-runner/src/registry.ts, packages/skill-runner/src/installer.ts, packages/skill-runner/src/runner.ts, packages/skill-runner/src/index.ts > external skill integration subsystem > Added allowlisted git installer pinned to commit SHA, file-backed skill registry, CLI runner contract, workspace scope checks, and manifest security validation.
- **2026-02-22** > tests/helpers/skill_repo.ts, tests/unit/skill_manifest.test.ts, tests/unit/skill_security.test.ts, tests/integration/skill_install_and_run.test.ts, tests/security/skill_policy.test.ts > Phase 4 tests > Added fixture helper plus unit/integration/security coverage for manifest validation, allowlist enforcement, install flow, invocation flow, and policy guardrails.
- **2026-02-22** > package.json, scripts/test-security, scripts/test-manual-checklist > test command and manual validation updates > Added dedicated security test command wiring and expanded checklist with Phase 4 verification steps.
- **2026-02-22** > docs/progress.md > Phase 4 status > Marked Phase 4 complete and advanced current phase marker to Phase 5 not started.
- **2026-02-22** > apps/gateway-orchestrator/src/builtins/reminder_store.ts, apps/gateway-orchestrator/src/builtins/task_store.ts, apps/gateway-orchestrator/src/builtins/approval_store.ts, apps/gateway-orchestrator/src/builtins/reminder_dispatcher.ts, apps/gateway-orchestrator/src/builtins/command_parser.ts > built-in workflow stores and command parsing > Added file-backed reminders/tasks/approvals, reminder scheduler, and command parser for chat-driven controls.
- **2026-02-22** > apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts > Phase 5 service wiring > Added built-in command handling, side-effect approval gate flow, reminder/task orchestration, retry endpoint support, and runtime dispatcher wiring.
- **2026-02-22** > apps/gateway-orchestrator/src/local_queue_store.ts, packages/contracts/src/job.ts > retry contract > Added retry job creation flow and `retryOf` linkage in job schema for failed/cancelled reruns.
- **2026-02-22** > tests/unit/command_parser.test.ts, tests/integration/reminders_and_commands.test.ts, tests/smoke/phase5_smoke.test.ts > Phase 5 tests > Added unit/integration/smoke coverage for command parsing, reminders, tasks, approvals, and job retry control.
- **2026-02-22** > scripts/test-manual-checklist > manual validation guide > Added explicit Phase 5 command-based manual verification steps.
- **2026-02-22** > docs/progress.md > Phase 5 status > Marked Phase 5 complete and advanced current phase marker to Phase 6 not started.
- **2026-02-22** > apps/gateway-orchestrator/src/builtins/note_store.ts, apps/gateway-orchestrator/src/builtins/command_parser.ts > notes capability > Added file-backed notes store and `/note add`/`/note list` command parsing.
- **2026-02-22** > apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts > notes runtime wiring > Added note command handling and note store wiring in gateway/app/server composition.
- **2026-02-22** > tests/unit/command_parser.test.ts, tests/unit/note_store.test.ts, tests/integration/reminders_and_commands.test.ts, tests/smoke/phase5_smoke.test.ts > notes test coverage > Added/expanded unit, integration, and smoke tests for note command flows.
- **2026-02-22** > scripts/test-manual-checklist, docs/progress.md > phase 5 docs refinement > Added manual note-validation steps and updated Phase 5 summary to explicitly include notes.
