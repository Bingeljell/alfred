# Changelog

- **2026-02-24** > apps/gateway-orchestrator/src/builtins/heartbeat_service.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, .env.example, tests/unit/heartbeat_service.test.ts, tests/unit/config.test.ts, tests/unit/gateway_app_ui_route.test.ts, tests/unit/web_console_ui.test.ts, docs/detailed_project_plan.md, docs/features.md, docs/progress.md, scripts/test-manual-checklist > HeartbeatService and heartbeat API/UI controls > Added heartbeat reliability loop with persistent state, active-hour/idle-queue gating, deduped alert delivery, `/v1/heartbeat/status|configure|run` endpoints, `/ui` heartbeat controls/source observability, config/env plumbing, and automated/manual test coverage.
- **2026-02-24** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts > transcript-frame container > Wrapped persisted transcript in a dedicated `.transcript-frame` container capped at `800px`, with the inner `<pre>` set to fill/wrap inside the frame to prevent panel-level width expansion.
- **2026-02-24** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts > sessionTranscript fixed-width cap > Capped persisted transcript width to `800px` (`min(100%, 800px)`) so long responses stay readable without excessive horizontal scrolling, with updated UI assertions.
- **2026-02-24** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts > sessionTranscript CSS containment > Prevented long unbroken transcript lines from expanding `/ui` layout by enforcing wrapped, scrollable, fixed-width transcript rendering and added UI test assertions for overflow guards.
- **2026-02-24** > apps/gateway-orchestrator/src/gateway_service.ts, tests/unit/gateway_service_llm.test.ts > prepareChatInput, shouldUseProviderManagedContext > Reduced token/context duplication by disabling app transcript injection when `openai-codex` provider-thread context is active (except forced `api_key` mode), with unit coverage for both paths.
- **2026-02-24** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts > renderSessionTranscript > Fixed `/ui` script parse failure by escaping transcript newline join/whitespace regex in generated HTML script so button handlers bind and UI actions execute.
- **2026-02-23** > docs/features.md, docs/detailed_project_plan.md, docs/progress.md, scripts/test-manual-checklist > phase 6 continuity docs and validation > Updated planning/feature/progress docs and manual checklist to include persisted transcript UX and restart-safe recent-conversation context continuity.
- **2026-02-23** > apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/gateway_service_llm.test.ts, tests/unit/web_console_ui.test.ts > prepareChatInput, buildRecentConversationContext, renderSessionTranscript > Added restart-safe conversation continuity by injecting bounded recent session transcript into chat prompts and exposing a persisted transcript panel in `/ui` with auto-refresh and manual refresh controls.
- **2026-02-23** > docs/features.md, docs/detailed_project_plan.md, docs/progress.md, scripts/test-manual-checklist > phase 6 documentation and manual validation updates > Updated MVP docs and manual test checklist to cover stream retention/noise controls, auth preference testing paths, and memory-reference validation in chat.
- **2026-02-23** > apps/gateway-orchestrator/src/builtins/conversation_store.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/llm/hybrid_llm_service.ts, apps/gateway-orchestrator/src/llm/openai_responses_service.ts, apps/gateway-orchestrator/src/whatsapp/normalize_baileys.ts, .env.example, tests/unit/conversation_store.test.ts, tests/unit/config.test.ts, tests/unit/gateway_service_llm.test.ts, tests/unit/hybrid_llm_service.test.ts, tests/unit/openai_responses_service.test.ts, tests/unit/web_console_ui.test.ts, tests/integration/baileys_async_updates.test.ts, tests/smoke/phase2_smoke.test.ts > ConversationStore.query, stream event filters, executeChatTurn memory injection, authPreference routing > Added stream retention/noise controls with queryable filtered stream API + UI noisy-toggle, explicit per-request LLM auth preference (`auto`/`oauth`/`api_key`) routing, non-silent no-backend chat guidance, and memory-aware prompt injection with source references in chat responses.
- **2026-02-23** > docs/detailed_project_plan.md, docs/features.md, docs/progress.md, scripts/test-manual-checklist > Phase 6 deliverables, WhatsApp acceptance criteria, Live WhatsApp manual checklist > Documented history-sync noise filtering scope and added explicit manual validation for accepted-vs-ignored inbound counters to guard context bloat.
- **2026-02-23** > apps/gateway-orchestrator/src/whatsapp/baileys_runtime.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/baileys_runtime.test.ts > BaileysRuntime.handleMessagesUpsert, safeMessageTimestampSeconds, trackSeenMessageKey, renderWaLiveSummary > Added WhatsApp history-sync noise filtering (drop non-`notify`, stale pre-live, and duplicate inbound messages) before model routing, and surfaced sync counters (`accepted`/`ignored`) in live status UI for observability/context-bloat control.
- **2026-02-23** > apps/gateway-orchestrator/src/auth/identity_profile_store.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/builtins/conversation_store.ts, apps/gateway-orchestrator/src/server.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/identity_profile_store.test.ts, tests/unit/gateway_service_llm.test.ts, tests/unit/conversation_store.test.ts, tests/unit/gateway_app_ui_route.test.ts, tests/unit/web_console_ui.test.ts, docs/features.md, docs/detailed_project_plan.md, scripts/test-manual-checklist > SSE stream + identity profile routing > Added server-sent events stream subscription (`/v1/stream/events/subscribe`) with UI real-time feed and poll fallback, plus persisted WhatsApp JID to auth-session mappings and automatic mapped-auth routing for WhatsApp inbound OAuth/LLM flows.
- **2026-02-23** > apps/gateway-orchestrator/src/builtins/conversation_store.ts, apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts, apps/gateway-orchestrator/src/notification_dispatcher.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, apps/gateway-orchestrator/src/whatsapp/baileys_runtime.ts, tests/unit/conversation_store.test.ts, tests/unit/baileys_runtime.test.ts, tests/unit/gateway_app_ui_route.test.ts, tests/unit/web_console_ui.test.ts, docs/features.md, docs/detailed_project_plan.md, scripts/test-manual-checklist, docs/progress.md > unified interaction stream and WhatsApp session persistence > Added persisted backend interaction stream events (`/v1/stream/events`) wired into `/ui` polling for a single cross-source console feed, logged gateway/WhatsApp/worker activity into the stream, and changed Baileys runtime shutdown behavior to preserve linked-device auth state across gateway restarts (no implicit logout on stop).
- **2026-02-23** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts, docs/features.md, docs/detailed_project_plan.md, scripts/test-manual-checklist > source-level console observability > Added source status cards and change-feed logging (Gateway/Auth/WhatsApp/Memory) with auto-polling, deduped source-change events, and manual refresh controls in `/ui` to track cross-service state in one place.
- **2026-02-23** > apps/gateway-orchestrator/src/server.ts, apps/gateway-orchestrator/src/whatsapp/live_inbound_relay.ts, tests/unit/live_inbound_relay.test.ts > live WhatsApp chat reply relay > Fixed live Baileys inbound handling to dispatch chat-mode gateway responses back to the originating WhatsApp JID, with unit coverage for reply/no-reply branching.
- **2026-02-23** > apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/whatsapp_live_qr_image_data.test.ts, tests/unit/web_console_ui.test.ts, package.json, package-lock.json, docs/features.md, docs/detailed_project_plan.md, scripts/test-manual-checklist > WhatsApp QR renderer reliability (no CDN dependency) > Added backend QR image generation (`qrImageDataUrl`) for live status/connect/disconnect responses and switched UI to consume backend QR payloads instead of browser CDN QR library, with unit coverage for QR data rendering helper.
- **2026-02-23** > apps/gateway-orchestrator/src/whatsapp/baileys_runtime.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts, .env.example, apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/baileys_runtime.test.ts, tests/unit/config.test.ts, tests/unit/web_console_ui.test.ts, scripts/test-manual-checklist, docs/features.md, docs/detailed_project_plan.md > WhatsApp QR churn guard and auto-refresh UX > Added capped QR generation per connect window (`WHATSAPP_BAILEYS_MAX_QR_GENERATIONS`, default `3`) with lock state requiring manual reconnect, and added silent UI live-status polling so QR image/raw payload refresh automatically without repeated `Live Status` clicks.
- **2026-02-23** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts > renderWaQrPreview and live setup scan UX > Added a direct scannable WhatsApp QR image block in `/ui` (with raw QR fallback), wired QR rendering hints for connect states, and expanded UI unit assertions for the new QR elements.
- **2026-02-23** > apps/gateway-orchestrator/src/whatsapp/baileys_runtime.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts, .env.example, tests/unit/config.test.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, scripts/test-manual-checklist > deprecated terminal qr removal > Removed deprecated `printQRInTerminal` runtime usage and corresponding config/env references; setup now relies on live status/UI QR data instead of terminal QR output.
- **2026-02-23** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts > intuitive live whatsapp setup UI > Added a guided WhatsApp setup section (state badge, next-step guidance, raw QR view, and one-click `.env` setup snippet copy) to make live Baileys onboarding clearer from the web console.
- **2026-02-23** > apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/whatsapp/baileys_runtime.ts, apps/gateway-orchestrator/src/server.ts, .env.example, tests/unit/config.test.ts, tests/unit/baileys_runtime.test.ts, scripts/test-manual-checklist, docs/features.md, docs/detailed_project_plan.md > safe single-number whatsapp test controls > Added required-prefix gating (`/alfred`), optional `fromMe` self-test mode, and sender allowlist controls for Baileys live ingress with config/runtime/unit-test/manual-doc coverage.
- **2026-02-23** > apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/whatsapp/baileys_runtime.ts, apps/gateway-orchestrator/src/server.ts, .env.example, tests/unit/config.test.ts, scripts/test-manual-checklist > Baileys QR operator flow > Added `WHATSAPP_BAILEYS_PRINT_QR` configuration (default enabled) and runtime wiring so QR is printed in gateway logs for easier linked-device onboarding.
- **2026-02-23** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts, scripts/test-manual-checklist, docs/features.md, docs/detailed_project_plan.md > live whatsapp controls and docs > Added web console controls/boot status for live WhatsApp connect-status-disconnect flows, expanded manual checklist for linked-device validation, and updated feature/plan docs to include production Baileys runtime expectations.
- **2026-02-23** > package.json, package-lock.json, apps/gateway-orchestrator/src/whatsapp/baileys_runtime.ts, apps/gateway-orchestrator/src/server.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/config.ts, .env.example, tests/unit/config.test.ts, tests/unit/baileys_runtime.test.ts, tests/unit/baileys_inbound_auth.test.ts, tests/unit/gateway_app_ui_route.test.ts > live WhatsApp Baileys runtime and security gating > Added real Baileys runtime wiring (connect/reconnect/disconnect, persisted auth dir, inbound relay, outbound adapter), provider/config/env controls, live status/connect/disconnect API routes, and inbound token authorization checks with unit coverage.
- **2026-02-23** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts > UI interaction state and console ordering controls > Added broader per-button in-flight feedback, clearer status coloring, OAuth auth-summary rendering with persisted telemetry, and a default `Newest first` console mode with clear-console control.
- **2026-02-23** > apps/gateway-orchestrator/src/codex/auth_state_store.ts, apps/gateway-orchestrator/src/codex/auth_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts, tests/unit/codex_auth_service.test.ts > codex auth telemetry persistence > Added durable auth telemetry state (`lastLogin`, `lastDisconnectAt`, last status check/snapshot/error), wired status endpoint to return telemetry across restarts, and added unit coverage for persistence behavior.
- **2026-02-23** > apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/web_console_ui.test.ts > sendChat/sendJob in-flight UI feedback > Added immediate request logging (`SEND_CHAT_REQUEST`/`SEND_JOB_REQUEST`), busy/success/error status states, and temporary send-button disablement while requests are in flight.
- **2026-02-23** > apps/gateway-orchestrator/src/llm/codex_chat_service.ts, apps/gateway-orchestrator/src/llm/hybrid_llm_service.ts, tests/unit/codex_chat_service.test.ts, tests/unit/hybrid_llm_service.test.ts > codex event parsing and fallback error propagation > Added assistant content-array text extraction, richer turn failure surfacing, and hybrid fallback behavior that raises Codex errors when no fallback result exists (instead of returning silent `ack`).
- **2026-02-23** > apps/gateway-orchestrator/src/llm/codex_chat_service.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, tests/unit/codex_chat_service.test.ts > generateText retry path and web auth boot status > Added stale-thread retry recovery for Codex turns after restart, boot-time OAuth status visibility in the web console, and unit coverage for the recovery flow.
- **2026-02-23** > scripts/test-manual-checklist, docs/features.md, docs/detailed_project_plan.md, docs/progress.md > codex setup and tracking docs > Added Codex app-server manual validation steps and updated feature/plan/progress docs for OAuth-first Codex runtime.
- **2026-02-23** > apps/gateway-orchestrator/src/codex/app_server_client.ts, apps/gateway-orchestrator/src/codex/auth_service.ts, apps/gateway-orchestrator/src/codex/thread_store.ts > Codex app-server client/auth/session thread state > Added stdio JSON-RPC Codex app-server client with initialize lifecycle, account auth/rate-limits wrappers, and file-backed per-session thread mapping.
- **2026-02-23** > apps/gateway-orchestrator/src/llm/codex_chat_service.ts, apps/gateway-orchestrator/src/llm/hybrid_llm_service.ts, apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/server.ts > OAuth-first codex turn routing with fallback > Added Codex turn execution for normal chat when ChatGPT auth is connected and automatic fallback to OpenAI Responses API-key path when unavailable.
- **2026-02-23** > apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts, apps/gateway-orchestrator/src/builtins/command_parser.ts > codex auth API and command surfaces > Added Codex-backed auth endpoints and UI controls (`connect/status/rate-limits/disconnect`) plus `/auth limits` command support.
- **2026-02-23** > tests/unit/codex_auth_service.test.ts, tests/unit/codex_chat_service.test.ts, tests/unit/hybrid_llm_service.test.ts, tests/unit/config.test.ts, tests/unit/command_parser.test.ts, tests/unit/gateway_app_ui_route.test.ts, tests/unit/web_console_ui.test.ts > codex auth/runtime tests > Added unit coverage for account status mapping, login/start shape handling, turn completion text extraction, hybrid fallback routing, and route/UI command wiring.
- **2026-02-23** > scripts/test-manual-checklist, docs/features.md, docs/detailed_project_plan.md, docs/progress.md > responses testing and phase tracking docs > Added manual checklist steps for verifying model responses via OAuth/API key and updated Phase 6 planning/progress docs to reflect OpenAI Responses runtime integration.
- **2026-02-23** > apps/gateway-orchestrator/src/llm/openai_responses_service.ts, apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/server.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/auth/oauth_service.ts > OpenAIResponsesService and chat turn routing > Added OpenAI Responses runtime integration for normal chat turns with per-session OAuth token preference, API key fallback, and safe `ack` fallback when no credential is configured.
- **2026-02-23** > tests/unit/openai_responses_service.test.ts, tests/unit/gateway_service_llm.test.ts, tests/unit/oauth_service.test.ts, tests/unit/config.test.ts > responses and credential tests > Added unit coverage for OAuth/API key credential selection, response extraction, gateway LLM routing behavior, OAuth token retrieval, and new config defaults.
- **2026-02-23** > apps/gateway-orchestrator/src/builtins/conversation_store.ts > ConversationStore > Added file-backed conversation event store scaffold for per-session chat history persistence groundwork (refresh-safe transcript replay).
- **2026-02-23** > apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts, apps/worker/src/server.ts, .env.example, scripts/test-manual-checklist > loadDotEnvFile and runtime startup env bootstrap > Added `.env` file loading for gateway/worker startup, introduced committed `.env.example` template, and documented `.env`-first manual test startup.
- **2026-02-23** > apps/gateway-orchestrator/src/auth/oauth_codec.ts, apps/gateway-orchestrator/src/auth/oauth_store.ts, apps/gateway-orchestrator/src/auth/oauth_service.ts > OAuthSecretCodec/OAuthStore/OAuthService > Added OAuth state+token persistence with optional encryption, mock/live modes, callback completion, status, and disconnect flows.
- **2026-02-23** > apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts > loadConfig and runtime wiring > Added OAuth/public URL configuration and gateway startup wiring for OAuth service initialization.
- **2026-02-23** > apps/gateway-orchestrator/src/builtins/command_parser.ts, apps/gateway-orchestrator/src/gateway_service.ts > auth commands and execution paths > Added `/auth connect`, `/auth status`, `/auth disconnect` command support for WhatsApp/chat ingress.
- **2026-02-23** > apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/ui/render_web_console.ts > OAuth API and UI controls > Added OAuth endpoints (`start/status/disconnect/callback/mock authorize`) and web console controls for local OAuth testing.
- **2026-02-23** > tests/unit/oauth_service.test.ts, tests/integration/oauth_commands.test.ts, tests/unit/command_parser.test.ts, tests/unit/config.test.ts, tests/unit/gateway_app_ui_route.test.ts, tests/unit/web_console_ui.test.ts > OAuth test coverage > Added unit/integration coverage for OAuth service behavior, command flow, route registration, config parsing, and UI endpoint wiring.
- **2026-02-23** > docs/detailed_project_plan.md, docs/features.md, docs/progress.md, scripts/test-manual-checklist > Phase 6.1 OAuth planning/progress/manual checks > Documented OAuth scope and acceptance criteria, moved Phase 6 to in-progress, and added manual OAuth verification steps.
- **2026-02-23** > apps/gateway-orchestrator/src/ui/render_web_console.ts > renderWebConsoleHtml > Added browser-based test console UI for chat, async jobs, Baileys simulation, and memory operations.
- **2026-02-23** > apps/gateway-orchestrator/src/app.ts, tests/unit/gateway_app_ui_route.test.ts, tests/unit/web_console_ui.test.ts > createGatewayApp and UI route tests > Added `/ui` HTML route, root redirect to `/ui`, and route/render tests for the new interface.
- **2026-02-23** > scripts/test-manual-checklist > web console checklist section > Added manual browser-driven validation steps for the new test interface.
- **2026-02-23** > docs/detailed_project_plan.md, docs/features.md > test surfaces and feature definition > Documented dual testing surfaces (web console now, WhatsApp path next) and acceptance criteria.
- **2026-02-22** > scripts/committer > first-commit index reset path > Added unborn-HEAD-safe staged index clearing so initial commits can run via `scripts/committer`.
- **2026-02-22** > docs/git_workflow.md > workflow sections > Added repository branching, commit, push, and validation workflow documentation.
- **2026-02-22** > docs/changelog.md > changelog format > Created changelog file with required per-change entry format.
- **2026-02-22** > AGENTS.md > Testing Workflow section > Added phase-based automated/manual testing rules and commit-time validation expectations.
- **2026-02-22** > Gemini.md > Testing Workflow section > Added phase-based automated/manual testing rules and commit-time validation expectations.
- **2026-02-22** > docs/detailed_project_plan.md > phase plan and test roadmap > Added phased implementation plan, proposed repo structure, and automated/manual test strategy.
- **2026-02-22** > docs/features.md > MVP and post-MVP features > Added key feature set with acceptance criteria and test approach per feature.
- **2026-02-22** > docs/changelog.md > changelog entries > Corrected legacy entry format and logged new planning/documentation updates.
- **2026-02-22** > AGENTS.md, Gemini.md > Repo Guidelines updates > Reloaded and committed updated agent instruction files with clarified architect/clarification-first guidance.
- **2026-02-22** > docs/detailed_project_plan.md > architecture and phase definitions > Replaced draft plan with locked decisions, phase exit criteria, and completion rule for progress/changelog updates.
- **2026-02-22** > docs/features.md > MVP and deferred scope > Aligned features to locked runtime, memory, external skill integration, and security model.
- **2026-02-22** > docs/progress.md > phase tracker > Added canonical progress tracking file with current phase and completion checklist template.
- **2026-02-22** > AGENTS.md > Progress and Changelog Discipline section > Added rule to require progress + changelog updates when tasks/phases complete.
- **2026-02-22** > Gemini.md > Progress and Changelog Discipline section > Added rule to require progress + changelog updates when tasks/phases complete.
- **2026-02-22** > package.json, tsconfig.json, vitest.config.ts, .gitignore > project bootstrap scripts/config > Added TypeScript runtime/test tooling with build and phase test commands.
- **2026-02-22** > apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/local_queue_store.ts, apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts > core runtime skeleton > Added config loader, file-backed queue store, gateway service, API app, and gateway startup entrypoint.
- **2026-02-22** > apps/worker/src/worker.ts, apps/worker/src/server.ts > worker loop > Added polling worker with deterministic stub processor, cancellation handling, and process bootstrap.
- **2026-02-22** > packages/contracts/src/job.ts, packages/contracts/src/receipt.ts, packages/contracts/src/index.ts > contracts schemas > Added initial job/message/receipt schemas and exported contract types.
- **2026-02-22** > tests/unit/config.test.ts, tests/unit/schemas.test.ts, tests/integration/job_handoff.test.ts, tests/smoke/phase1_smoke.test.ts, tests/helpers/wait_for.ts > Phase 1 tests > Added unit/integration/smoke tests covering config, contracts, and queue handoff flow.
- **2026-02-22** > scripts/test-unit, scripts/test-integration, scripts/test-smoke, scripts/test-security, scripts/test-manual-checklist > test runners > Added executable scripts for automated and manual phase validation.
- **2026-02-22** > docs/progress.md > Phase 1 status > Marked Phase 1 complete and advanced current phase marker to Phase 2.
- **2026-02-22** > packages/contracts/src/whatsapp.ts, packages/contracts/src/index.ts > WhatsApp contract schema > Added Baileys inbound payload schema export for provider normalization and validation.
- **2026-02-22** > packages/provider-adapters/src/whatsapp_adapter.ts, packages/provider-adapters/src/baileys_adapter.ts, packages/provider-adapters/src/index.ts > provider adapters > Added outbound adapter interface, stdout/in-memory adapters, and Baileys transport adapter wrapper.
- **2026-02-22** > apps/gateway-orchestrator/src/whatsapp/normalize_baileys.ts, apps/gateway-orchestrator/src/whatsapp/dedupe_store.ts > ingress normalization and dedupe > Added Baileys message normalization and file-backed dedupe TTL store.
- **2026-02-22** > apps/gateway-orchestrator/src/notification_store.ts, apps/gateway-orchestrator/src/notification_dispatcher.ts > async status outbox > Added file-backed outbound notification queue and dispatcher loop for WhatsApp status updates.
- **2026-02-22** > apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts > Phase 2 gateway updates > Added Baileys inbound route handling, dedupe integration, queued notifications, and dispatcher startup wiring.
- **2026-02-22** > apps/worker/src/worker.ts, apps/worker/src/server.ts > worker status events > Added lifecycle status callbacks and notification enqueue integration for running/succeeded/failed/cancelled updates.
- **2026-02-22** > tests/unit/baileys_normalizer.test.ts, tests/unit/dedupe_store.test.ts, tests/integration/baileys_async_updates.test.ts, tests/smoke/phase2_smoke.test.ts > Phase 2 tests > Added unit/integration/smoke coverage for Baileys normalization, dedupe, async updates, and chat responsiveness during long jobs.
- **2026-02-22** > docs/progress.md > Phase 2 status > Marked Phase 2 complete and advanced current phase marker to Phase 3 in progress.
- **2026-02-22** > packages/memory/src/types.ts, packages/memory/src/redact.ts, packages/memory/src/chunker.ts, packages/memory/src/embeddings.ts, packages/memory/src/sqlite_memory_index.ts, packages/memory/src/memory_service.ts, packages/memory/src/index.ts > memory subsystem > Added markdown-canonical memory service with SQLite FTS index, embedding cache, hybrid search, snippet retrieval, note append, sync triggers, and status reporting APIs.
- **2026-02-22** > apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts > memory API wiring > Added memory endpoints (`status`, `sync`, `search`, `snippet`, `notes`) and runtime memory service startup/shutdown wiring in gateway process.
- **2026-02-22** > tests/unit/memory_chunker.test.ts, tests/unit/memory_redact.test.ts, tests/integration/memory_service.test.ts, tests/smoke/phase3_smoke.test.ts > Phase 3 tests > Added unit/integration/smoke coverage for chunking, redaction, cited retrieval, append flow, and recall quality baseline.
- **2026-02-22** > scripts/test-manual-checklist > manual validation guide > Expanded manual checklist with Phase 2 and Phase 3 verification steps and commands.
- **2026-02-22** > docs/progress.md > Phase 3 status > Marked Phase 3 complete and advanced current phase marker to Phase 4 not started.
- **2026-02-22** > packages/contracts/src/skill.ts, packages/contracts/src/index.ts > skill contract schema > Added skill manifest and structured error schemas for external skill packaging and invocation validation.
- **2026-02-22** > packages/skill-runner/src/types.ts, packages/skill-runner/src/security.ts, packages/skill-runner/src/registry.ts, packages/skill-runner/src/installer.ts, packages/skill-runner/src/runner.ts, packages/skill-runner/src/index.ts > external skill integration subsystem > Added allowlisted git installer pinned to commit SHA, file-backed skill registry, CLI runner contract, workspace scope checks, and manifest security validation.
- **2026-02-22** > tests/helpers/skill_repo.ts, tests/unit/skill_manifest.test.ts, tests/unit/skill_security.test.ts, tests/integration/skill_install_and_run.test.ts, tests/security/skill_policy.test.ts > Phase 4 tests > Added fixture helper plus unit/integration/security coverage for manifest validation, allowlist enforcement, install flow, invocation flow, and policy guardrails.
- **2026-02-22** > package.json, scripts/test-security, scripts/test-manual-checklist > test command and manual validation updates > Added dedicated security test command wiring and expanded checklist with Phase 4 verification steps.
- **2026-02-22** > docs/progress.md > Phase 4 status > Marked Phase 4 complete and advanced current phase marker to Phase 5 not started.
- **2026-02-22** > apps/gateway-orchestrator/src/builtins/reminder_store.ts, apps/gateway-orchestrator/src/builtins/task_store.ts, apps/gateway-orchestrator/src/builtins/approval_store.ts, apps/gateway-orchestrator/src/builtins/reminder_dispatcher.ts, apps/gateway-orchestrator/src/builtins/command_parser.ts > built-in workflow stores and command parsing > Added file-backed reminders/tasks/approvals, reminder scheduler, and command parser for chat-driven controls.
- **2026-02-22** > apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/config.ts, apps/gateway-orchestrator/src/server.ts > Phase 5 service wiring > Added built-in command handling, side-effect approval gate flow, reminder/task orchestration, retry endpoint support, and runtime dispatcher wiring.
- **2026-02-22** > apps/gateway-orchestrator/src/local_queue_store.ts, packages/contracts/src/job.ts > retry contract > Added retry job creation flow and `retryOf` linkage in job schema for failed/cancelled reruns.
- **2026-02-22** > tests/unit/command_parser.test.ts, tests/integration/reminders_and_commands.test.ts, tests/smoke/phase5_smoke.test.ts > Phase 5 tests > Added unit/integration/smoke coverage for command parsing, reminders, tasks, approvals, and job retry control.
- **2026-02-22** > scripts/test-manual-checklist > manual validation guide > Added explicit Phase 5 command-based manual verification steps.
- **2026-02-22** > docs/progress.md > Phase 5 status > Marked Phase 5 complete and advanced current phase marker to Phase 6 not started.
- **2026-02-22** > apps/gateway-orchestrator/src/builtins/note_store.ts, apps/gateway-orchestrator/src/builtins/command_parser.ts > notes capability > Added file-backed notes store and `/note add`/`/note list` command parsing.
- **2026-02-22** > apps/gateway-orchestrator/src/gateway_service.ts, apps/gateway-orchestrator/src/app.ts, apps/gateway-orchestrator/src/server.ts > notes runtime wiring > Added note command handling and note store wiring in gateway/app/server composition.
- **2026-02-22** > tests/unit/command_parser.test.ts, tests/unit/note_store.test.ts, tests/integration/reminders_and_commands.test.ts, tests/smoke/phase5_smoke.test.ts > notes test coverage > Added/expanded unit, integration, and smoke tests for note command flows.
- **2026-02-22** > scripts/test-manual-checklist, docs/progress.md > phase 5 docs refinement > Added manual note-validation steps and updated Phase 5 summary to explicitly include notes.
